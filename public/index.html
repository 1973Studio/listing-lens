<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Listing Lens | The Digital Inspector for Transport</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;900&display=swap" rel="stylesheet">

  <style>
    body { font-family: 'Inter', sans-serif; }
    ::selection { background-color: #2563EB; color: white; }
    @keyframes scan { 0% { top: 0%; opacity: 0; } 10% { opacity: 1; } 90% { opacity: 1; } 100% { top: 100%; opacity: 0; } }
    .animate-scan { animation: scan 2.5s linear infinite; }
    @keyframes subtle-pulse { 0%, 100% { box-shadow: 0 10px 25px -5px rgba(37, 99, 235, 0.4); } 50% { box-shadow: 0 20px 35px -5px rgba(37, 99, 235, 0.5); } }
    .animate-pulse-slow { animation: subtle-pulse 3s infinite; }

    /* simple entrance */
    @keyframes fadeUp { from { opacity: 0; transform: translateY(10px);} to { opacity: 1; transform: translateY(0);} }
    .animate-fade-in-up { animation: fadeUp .45s ease-out both; }
  </style>
</head>

<body class="bg-white text-black min-h-screen flex flex-col relative">

  <!-- HIDDEN INPUT FOR UPLOAD -->
  <input type="file" id="file-upload" class="hidden" accept="image/*" />

  <!-- LOADING MODAL -->
  <div id="loading-modal" class="fixed inset-0 bg-white/90 backdrop-blur-md z-50 hidden flex flex-col justify-center items-center">
    <div class="w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mb-4"></div>
    <h2 class="text-2xl font-black animate-pulse">ANALYSING...</h2>
    <p class="text-gray-500 mt-2">Checking faults, market value, and risks.</p>
  </div>

  <!-- RESULT MODAL -->
  <div id="result-modal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden flex justify-center items-center p-4">
    <div class="bg-white rounded-3xl w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-2xl relative animate-fade-in-up">
      <button id="close-btn" class="absolute top-4 right-4 bg-gray-100 p-2 rounded-full hover:bg-gray-200">âœ•</button>

      <div class="p-8">
        <div class="flex flex-col md:flex-row justify-between items-start border-b border-gray-100 pb-6 mb-6">
          <div>
            <div class="text-xs font-mono text-gray-400 uppercase tracking-widest mb-1">Analysis Complete</div>
            <h2 id="res-title" class="text-3xl font-black leading-tight">Vehicle Name</h2>
          </div>
          <div class="mt-4 md:mt-0 text-right">
            <div class="text-xs font-mono text-gray-400 uppercase tracking-widest mb-1">Lens Score</div>
            <div id="res-score" class="text-4xl font-black text-blue-600">--/100</div>
          </div>
        </div>

        <div class="mb-8">
          <h3 class="font-bold text-lg mb-2">Verdict</h3>
          <p id="res-summary" class="text-gray-600 leading-relaxed">Summary text goes here...</p>
        </div>

        <div class="bg-gray-50 p-4 rounded-xl mb-8 flex justify-between items-center">
          <span class="font-bold text-gray-500">Estimated Market Value</span>
          <span id="res-value" class="font-black text-xl text-black">$XX,XXX</span>
        </div>

        <div>
          <h3 class="font-bold text-lg mb-4 text-red-600">Identified Risks</h3>
          <ul id="res-flags" class="space-y-3"></ul>
        </div>

        <div id="res-questions-wrap" class="mt-10 hidden">
          <h3 class="font-bold text-lg mb-4">Questions to ask the seller</h3>
          <ul id="res-questions" class="space-y-2 text-gray-700"></ul>
        </div>
      </div>

      <div class="bg-black text-white p-4 text-center text-sm font-bold tracking-wide">
        LISTING LENS REPORT
      </div>
    </div>
  </div>

  <!-- NAV (Smart Sticky) -->
  <nav id="main-nav" class="flex justify-between items-center p-6 md:p-12 z-40 fixed top-0 left-0 right-0 bg-white/95 backdrop-blur-md transition-transform duration-300">
    <div class="text-2xl font-black tracking-tighter cursor-pointer z-50 relative">LISTING LENS.</div>
    <button id="menu-btn" class="z-50 relative group p-2" aria-label="Open menu">
      <div class="space-y-2">
        <span class="block w-8 h-0.5 bg-black transition-all duration-300 group-hover:bg-blue-600"></span>
        <span class="block w-8 h-0.5 bg-black transition-all duration-300 group-hover:bg-blue-600"></span>
      </div>
    </button>
  </nav>

  <!-- MENU OVERLAY -->
  <div id="menu-overlay" class="fixed inset-0 bg-white z-30 hidden flex-col justify-center items-center opacity-0 transition-opacity duration-300 pt-32">
    <div class="flex flex-col gap-8 text-center">
      <a href="#how-it-works" class="menu-link text-4xl font-black tracking-tight hover:text-blue-600 transition-colors">How it Works</a>
      <a href="#pricing" class="menu-link text-4xl font-black tracking-tight hover:text-blue-600 transition-colors">Pricing</a>
      <a href="#faq" class="menu-link text-4xl font-black tracking-tight hover:text-blue-600 transition-colors">FAQ</a>
      <div class="h-px w-24 bg-gray-200 mx-auto my-4"></div>
      <button class="text-xl font-bold uppercase tracking-widest border-2 border-black px-12 py-4 rounded-full hover:bg-black hover:text-white transition-all">Login</button>
    </div>
  </div>

  <!-- HERO SECTION -->
  <main class="px-6 md:px-12 pt-32 pb-12 grid md:grid-cols-2 gap-12 items-center relative z-10">
    <div class="space-y-8 animate-fade-in-up">
      <h1 class="text-5xl md:text-7xl font-black leading-tight tracking-tighter">
        See every listing<br>
        <span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-blue-400">like an expert.</span>
      </h1>
      <p class="text-xl md:text-2xl font-medium max-w-md text-gray-500 leading-relaxed">
        Get the insights you need instantly. We reveal the true condition, risks, and red flags so you can buy smarter.
      </p>

      <!-- START SCAN BUTTON -->
      <button id="start-scan-btn" class="group relative bg-blue-600 text-white text-lg font-bold py-5 px-12 rounded-full overflow-hidden animate-pulse-slow transition-all duration-300 transform hover:-translate-y-1 cursor-pointer">
        <span class="relative z-10 flex items-center gap-2">
          START SCAN
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 group-hover:translate-x-1 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
          </svg>
        </span>
        <div class="absolute inset-0 bg-black transform scale-x-0 group-hover:scale-x-100 transition-transform origin-left duration-300"></div>
      </button>

      <div class="space-y-1">
        <p class="text-xs text-gray-500 font-medium tracking-wide">Works with Carsales, FB Marketplace, eBay, Gumtree & more.</p>
        <p class="text-xs text-gray-400 font-mono tracking-widest uppercase">* No app download required</p>
      </div>
    </div>

    <div class="relative bg-gray-100 rounded-3xl h-[500px] w-full overflow-hidden shadow-inner group">
      <div id="scan-image" class="absolute inset-0 bg-cover bg-center opacity-80 transition-all duration-1000"
           style="background-image: url('https://images.unsplash.com/photo-1533473359331-0135ef1b58bf?q=80&w=2070&auto=format&fit=crop');"></div>
      <div class="absolute inset-0 bg-black/10"></div>
      <div class="absolute bottom-8 left-8 right-8 bg-white/90 backdrop-blur-md p-6 rounded-2xl shadow-lg border border-white/50">
        <div class="flex justify-between items-end">
          <div>
            <div class="text-xs font-mono text-gray-500 uppercase tracking-widest mb-1">Target Detected</div>
            <div id="scan-title" class="text-2xl font-black">2015 Toyota Hilux</div>
          </div>
          <div class="text-right">
            <div class="text-xs font-mono text-gray-500 uppercase tracking-widest mb-1">Lens Score</div>
            <div id="scan-score" class="text-3xl font-black text-orange-500">68/100</div>
          </div>
        </div>
      </div>
      <div class="absolute left-0 w-full h-1 bg-blue-500 shadow-[0_0_30px_rgba(59,130,246,1)] animate-scan z-20"></div>
      <div class="absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20 mix-blend-overlay"></div>
    </div>
  </main>

  <!-- BENEFIT STRIP -->
  <section class="bg-black text-white py-16 px-6 text-center">
    <h2 class="text-3xl md:text-4xl font-bold tracking-tight max-w-3xl mx-auto">
      Browse with confidence. <br>
      <span class="text-gray-400">We give you the full picture before you enquire, inspect, or travel.</span>
    </h2>
  </section>

  <!-- HOW IT WORKS -->
  <section id="how-it-works" class="py-24 px-6 md:px-12 bg-white scroll-mt-20">
    <div class="max-w-7xl mx-auto">
      <h3 class="text-xs font-bold uppercase tracking-widest text-gray-400 mb-12">How it Works</h3>

      <div class="grid md:grid-cols-3 gap-12">
        <div class="space-y-4">
          <div class="text-6xl font-black text-blue-100">01</div>
          <h4 class="text-2xl font-bold">Upload a screenshot</h4>
          <p class="text-gray-500 leading-relaxed">Found something interesting? Snap a screenshot of the listing from any platform. We accept images from mobile or desktop.</p>
        </div>

        <div class="space-y-4">
          <div class="text-6xl font-black text-blue-100">02</div>
          <h4 class="text-2xl font-bold">We analyse the data</h4>
          <p class="text-gray-500 leading-relaxed">Our engine acts as your digital expert, checking visual condition clues, pricing fairness, and seller reliability patterns.</p>
        </div>

        <div class="space-y-4">
          <div class="text-6xl font-black text-blue-100">03</div>
          <h4 class="text-2xl font-bold">You get the answers</h4>
          <p class="text-gray-500 leading-relaxed">Receive a clear breakdown of pros, cons, and questions to ask. It's like having a knowledgeable friend look over your shoulder.</p>
        </div>
      </div>

      <div class="mt-12 p-6 bg-gray-50 rounded-2xl border border-gray-100 text-sm text-gray-500 font-medium text-center">
        ðŸ’¡ <span class="text-black font-bold">Note:</span> We help you shortlist the best options. Always perform a physical inspection before purchase.
      </div>
    </div>
  </section>

  <!-- WHY LISTING LENS WORKS -->
  <section class="py-24 px-6 md:px-12 bg-gray-50">
    <div class="max-w-7xl mx-auto grid md:grid-cols-2 gap-16 items-center">
      <div>
        <h3 class="text-4xl font-black tracking-tight mb-8 leading-tight">Your unfair advantage.</h3>
        <div class="space-y-8">
          <div>
            <h4 class="text-lg font-bold">Expert knowledge, on demand</h4>
            <p class="text-gray-500">Access a database of thousands of verified listings, common faults, and known scams instantly.</p>
          </div>
          <div>
            <h4 class="text-lg font-bold">See what others miss</h4>
            <p class="text-gray-500">We highlight subtle visual clues and mismatched details that usually slip past the untrained eye.</p>
          </div>
          <div>
            <h4 class="text-lg font-bold">Cut through the noise</h4>
            <p class="text-gray-500">We help you ignore the sales fluff and focus on the facts: condition, history, and fair market value.</p>
          </div>
        </div>
      </div>

      <div class="grid grid-cols-1 gap-4">
        <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100 flex items-center gap-4">
          <div class="h-2 w-2 bg-blue-600 rounded-full"></div>
          <span class="font-bold">Instant condition analysis</span>
        </div>
        <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100 flex items-center gap-4">
          <div class="h-2 w-2 bg-blue-600 rounded-full"></div>
          <span class="font-bold">Visual consistency check</span>
        </div>
        <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100 flex items-center gap-4">
          <div class="h-2 w-2 bg-blue-600 rounded-full"></div>
          <span class="font-bold">Fair price estimation</span>
        </div>
        <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100 flex items-center gap-4">
          <div class="h-2 w-2 bg-blue-600 rounded-full"></div>
          <span class="font-bold">Summary Score (LENS SCOREâ„¢)</span>
        </div>
      </div>
    </div>
  </section>

  <!-- NOT AN AI GUESS -->
  <section class="py-24 px-6 md:px-12 bg-white text-center">
    <div class="max-w-3xl mx-auto">
      <h2 class="text-3xl font-black mb-6">More than just a scan.</h2>
      <p class="text-lg text-gray-500 leading-relaxed mb-8">
        Listing Lens is your personal research team. We check mechanical patterns, wear indicators, and market data to give you a complete briefing.
      </p>
      <div class="inline-block bg-gray-100 px-6 py-3 rounded-full text-sm font-bold tracking-wide">
        Technology makes it fast. You stay in control.
      </div>
    </div>
  </section>

  <!-- FAQ SECTION -->
  <section id="faq" class="py-24 px-6 md:px-12 bg-gray-50 scroll-mt-20">
    <div class="max-w-4xl mx-auto">
      <h3 class="text-xs font-bold uppercase tracking-widest text-gray-400 mb-12 text-center">Common Questions</h3>

      <div class="grid gap-6">
        <div class="bg-white p-8 rounded-2xl border border-gray-100">
          <h4 class="text-lg font-bold mb-2">Can I use this instead of a mechanic?</h4>
          <p class="text-gray-500">No. Listing Lens is a "pre-screen" tool. We help you filter out the bad deals instantly so you don't waste time or money inspecting them. Always get a physical inspection for the car you decide to buy.</p>
        </div>

        <div class="bg-white p-8 rounded-2xl border border-gray-100">
          <h4 class="text-lg font-bold mb-2">Does it work on motorbikes and boats?</h4>
          <p class="text-gray-500">Yes. Our system is trained on all forms of transport including Cars, 4x4s, Motorbikes, Boats, Caravans, Trucks, and Farm Machinery.</p>
        </div>

        <div class="bg-white p-8 rounded-2xl border border-gray-100">
          <h4 class="text-lg font-bold mb-2">Is my data private?</h4>
          <p class="text-gray-500">Yes. We are a privacy-first company. We do not store your uploaded screenshots after the analysis is complete. We do not scrape or sell data.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- PRICING -->
  <section id="pricing" class="py-24 px-6 md:px-12 bg-black text-white scroll-mt-20">
    <div class="max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-end gap-12">
      <div>
        <h3 class="text-4xl font-black mb-4">Simple Pricing.</h3>
        <p class="text-gray-400 text-lg">No subscriptions required. Pay as you scan.</p>
      </div>

      <div class="flex flex-col md:flex-row gap-6 w-full md:w-auto">
        <div class="bg-white/10 backdrop-blur-md border border-white/20 p-8 rounded-2xl flex-1 md:min-w-[250px]">
          <div class="text-sm font-mono text-gray-400 uppercase tracking-widest mb-2">Single Scan</div>
          <div class="text-4xl font-black mb-4">$2.50</div>
          <button id="price-scan-btn-1" class="w-full bg-white text-black font-bold py-3 rounded-lg hover:bg-blue-600 hover:text-white transition-all">Start Scan</button>
        </div>

        <div class="relative bg-blue-600 p-8 rounded-2xl flex-1 md:min-w-[250px] transform md:-translate-y-4 shadow-2xl shadow-blue-900/50">
          <div class="absolute -top-4 right-8 bg-white text-green-600 text-xs font-black px-3 py-1 rounded-full uppercase tracking-widest shadow-lg">
            Save 70%
          </div>
          <div class="text-sm font-mono text-blue-200 uppercase tracking-widest mb-2">Hunter Pack</div>
          <div class="text-4xl font-black mb-1">$20.00</div>
          <div class="text-sm text-blue-100 mb-4">30 Scans <span class="opacity-50">(~66c each)</span></div>
          <button class="w-full bg-black text-white font-bold py-3 rounded-lg hover:bg-white hover:text-black transition-all">Get Pack</button>
        </div>
      </div>
    </div>
  </section>

  <!-- TRUST & FOOTER -->
  <footer class="bg-white border-t border-gray-100 pt-16 pb-8 px-6 md:px-12">
    <div class="max-w-7xl mx-auto grid md:grid-cols-2 gap-12 mb-16">
      <div>
        <h4 class="font-bold text-lg mb-4">Your images are secure.</h4>
        <p class="text-sm text-gray-500 max-w-sm">We donâ€™t change the listing. We expose it. Everything comes from the screenshot you provide. Screenshots arenâ€™t stored once your report is generated.</p>
      </div>
      <div class="md:text-right">
        <h4 class="font-bold text-lg mb-4">Ready to see the truth?</h4>
        <button id="footer-scan-btn" class="bg-black text-white px-8 py-3 rounded-full font-bold hover:bg-blue-600 transition-colors">Start Scan â†’</button>
      </div>
    </div>

    <div class="max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center text-gray-400 font-mono text-xs uppercase tracking-widest gap-4 pt-8 border-t border-gray-100">
      <div class="flex flex-wrap justify-center md:justify-start gap-4 md:gap-8">
        <a href="#" class="hover:text-blue-600 transition-colors">Privacy Policy</a>
        <a href="#" class="hover:text-blue-600 transition-colors">Terms & Conditions</a>
        <span>Not a mechanical inspection</span>
        <span>Powered by GPT</span>
        <span>Site by <a href="https://www.theviking.io" target="_blank" class="hover:text-blue-500 transition-colors" rel="noreferrer">The Viking</a></span>
      </div>
      <div>Â© 2025-2026 - THE VIKING</div>
    </div>
  </footer>

  <!-- ACKNOWLEDGEMENT OF COUNTRY -->
  <div class="bg-white py-8 px-6 text-center border-t border-gray-50">
    <p class="text-[10px] text-gray-300 font-mono uppercase tracking-widest max-w-4xl mx-auto leading-relaxed">
      In the spirit of reconciliation we acknowledge the Traditional Custodians of Country throughout Australia and their connections to land, sea and community. We pay our respect to their Elders past and present and extend that respect to all Aboriginal and Torres Strait Islander peoples today.
    </p>
  </div>

  <script>
    // ==============================
    // CONFIG: set your backend URL
    // ==============================
    // This must be an HTTPS endpoint you control (Netlify Function / Cloudflare Worker / Firebase onRequest)
    // Expected request:
    //  POST { imageBase64: "..." }
    // Expected response:
    //  { data: { vehicle_title, lens_score, summary, market_value_estimate, red_flags: [], questions_to_ask?: [] } }
    //
    // Change this to your live endpoint:
    const ANALYZE_ENDPOINT = "/.netlify/functions/analyzeListing";


    // ==============================
    // Upload + scan logic
    // ==============================
    const fileInput = document.getElementById('file-upload');

    function triggerUpload() {
      fileInput.value = "";
      fileInput.click();
    }

    async function handleScan(file) {
      if (!file) return;

      document.getElementById('loading-modal').classList.remove('hidden');

      try {
        const base64String = await fileToBase64(file);

        const res = await fetch(ANALYZE_ENDPOINT, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ imageBase64: base64String })
        });

        if (!res.ok) {
          const text = await res.text().catch(() => "");
          throw new Error(`Backend error (${res.status}): ${text || "Unknown error"}`);
        }

        const payload = await res.json();

        // tolerate either {data:{...}} or {data:{data:{...}}} depending on your backend
        const data =
          payload?.data?.data ||
          payload?.data ||
          payload;

        renderResult(data);
      } catch (err) {
        console.error("Scan Error:", err);
        alert("Analysis failed. Please try again.\n\n" + (err?.message || err));
        document.getElementById('loading-modal').classList.add('hidden');
      }
    }

    function renderResult(data) {
      document.getElementById('loading-modal').classList.add('hidden');
      document.getElementById('result-modal').classList.remove('hidden');

      document.getElementById('res-title').innerText = data.vehicle_title || "Unknown Vehicle";
      document.getElementById('res-score').innerText = (data.lens_score ?? "--") + "/100";
      document.getElementById('res-summary').innerText = data.summary || "No summary returned.";
      document.getElementById('res-value').innerText = data.market_value_estimate || "N/A";

      const scoreEl = document.getElementById('res-score');
      const score = Number(data.lens_score);

      if (Number.isFinite(score)) {
        if (score > 75) scoreEl.className = "text-4xl font-black text-green-500";
        else if (score > 50) scoreEl.className = "text-4xl font-black text-orange-500";
        else scoreEl.className = "text-4xl font-black text-red-500";
      } else {
        scoreEl.className = "text-4xl font-black text-blue-600";
      }

      const flagsList = document.getElementById('res-flags');
      flagsList.innerHTML = "";
      (data.red_flags || []).forEach(flag => {
        const li = document.createElement('li');
        li.className = "text-red-600 font-medium";
        li.innerText = "âš ï¸ " + flag;
        flagsList.appendChild(li);
      });

      // optional questions list
      const qWrap = document.getElementById('res-questions-wrap');
      const qList = document.getElementById('res-questions');
      const questions = data.questions_to_ask || data.questions || [];

      if (Array.isArray(questions) && questions.length) {
        qWrap.classList.remove('hidden');
        qList.innerHTML = "";
        questions.forEach(q => {
          const li = document.createElement('li');
          li.className = "bg-gray-50 border border-gray-100 rounded-xl p-3";
          li.innerText = "â€¢ " + q;
          qList.appendChild(li);
        });
      } else {
        qWrap.classList.add('hidden');
        qList.innerHTML = "";
      }
    }

    function closeModal() {
      document.getElementById('result-modal').classList.add('hidden');
    }

    function fileToBase64(file) {
      return new Promise((resolve, reject) => {
        const reader = new FileReader();
        reader.onerror = () => reject(new Error("File read failed"));
        reader.onloadend = () => {
          // strip "data:image/...;base64,"
          const result = String(reader.result || "");
          const base64 = result.includes(",") ? result.split(",")[1] : result;
          resolve(base64);
        };
        reader.readAsDataURL(file);
      });
    }

    // ==============================
    // UI scripts (unchanged vibe)
    // ==============================
    document.addEventListener("DOMContentLoaded", () => {
      // Randomizer Script (For Hero Image)
      const scenarios = [
        { title: "2024 Toyota Sienna Minivan", score: "92/100", color: "text-green-500", image: "https://images.unsplash.com/photo-1720545044233-d2ac77fa6030?q=80&w=2070&auto=format&fit=crop" },
        { title: "2021 Ducati Panigale V4", score: "94/100", color: "text-green-500", image: "https://images.unsplash.com/photo-1635094742897-3f0014ccc07b?q=80&w=2070&auto=format&fit=crop" },
        { title: "2020 Ford F-250 Super Duty Ute", score: "88/100", color: "text-green-500", image: "https://images.unsplash.com/photo-1697120104408-c3163481df7c?q=80&w=2071&auto=format&fit=crop" },
        { title: "Gulf Craft Majesty 50 motor yacht", score: "45/100", color: "text-red-500", image: "https://images.unsplash.com/photo-1605281317010-fe5ffe798166?q=80&w=2070&auto=format&fit=crop" },
        { title: "Airstream Travel Trailer", score: "82/100", color: "text-green-500", image: "https://images.unsplash.com/photo-1523987355523-c7b5b0dd90a7?q=80&w=2070&auto=format&fit=crop" },
        { title: "2019 Scania R500", score: "76/100", color: "text-orange-500", image: "https://images.unsplash.com/photo-1601584115197-04ecc0da31d7?q=80&w=2070&auto=format&fit=crop" },
        { title: "John Deere 6930 tractor", score: "91/100", color: "text-green-500", image: "https://images.unsplash.com/photo-1614977645540-7abd88ba8e56?q=80&w=2070&auto=format&fit=crop" }
      ];
      const selected = scenarios[Math.floor(Math.random() * scenarios.length)];
      const imgEl = document.getElementById('scan-image');
      const titleEl = document.getElementById('scan-title');
      const scoreEl = document.getElementById('scan-score');
      imgEl.style.backgroundImage = `url('${selected.image}')`;
      titleEl.textContent = selected.title;
      scoreEl.textContent = selected.score;
      scoreEl.className = `text-3xl font-black ${selected.color}`;

      // Menu Toggle
      const menuBtn = document.getElementById('menu-btn');
      const menuOverlay = document.getElementById('menu-overlay');
      const menuLinks = document.querySelectorAll('.menu-link');
      let isMenuOpen = false;

      function toggleMenu() {
        isMenuOpen = !isMenuOpen;
        if (isMenuOpen) {
          menuOverlay.classList.remove('hidden');
          setTimeout(() => {
            menuOverlay.classList.remove('opacity-0');
            menuOverlay.classList.add('opacity-100');
          }, 10);
          menuBtn.classList.add('rotate-90');
        } else {
          menuOverlay.classList.remove('opacity-100');
          menuOverlay.classList.add('opacity-0');
          setTimeout(() => menuOverlay.classList.add('hidden'), 300);
          menuBtn.classList.remove('rotate-90');
        }
      }
      menuBtn.addEventListener('click', toggleMenu);
      menuLinks.forEach(link => link.addEventListener('click', toggleMenu));

      // Smart Navbar
      let lastScrollY = window.scrollY;
      const nav = document.getElementById('main-nav');
      window.addEventListener('scroll', () => {
        if (isMenuOpen) return;
        const current = window.scrollY;
        if (current > lastScrollY && current > 50) nav.classList.add('-translate-y-full');
        else nav.classList.remove('-translate-y-full');
        lastScrollY = current;
      });

      // Wire buttons
      document.getElementById('start-scan-btn').addEventListener('click', triggerUpload);
      document.getElementById('price-scan-btn-1').addEventListener('click', triggerUpload);
      document.getElementById('footer-scan-btn').addEventListener('click', triggerUpload);
      document.getElementById('close-btn').addEventListener('click', closeModal);

      // File input handler
      fileInput.addEventListener('change', () => handleScan(fileInput.files?.[0]));
    });
  </script>
</body>
</html>

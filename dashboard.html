<!doctype html>
<html lang="en" class="h-full scroll-smooth">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Listing Lens — Dashboard</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@500;700&display=swap" rel="stylesheet">

  <style>
    :root { color-scheme: dark; }
    body { font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, sans-serif; }
    .font-mono { font-family: "JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace; }
    ::selection { background: #22c55e; color: #06110a; }

    /* Subtle grid texture */
    .grid-bg{
      background-image:
        radial-gradient(circle at 1px 1px, rgba(255,255,255,0.06) 1px, transparent 0);
      background-size: 26px 26px;
    }

    /* Nice scrollbar (optional) */
    *::-webkit-scrollbar { height: 10px; width: 10px; }
    *::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.12); border-radius: 999px; }
    *::-webkit-scrollbar-track { background: rgba(255,255,255,0.04); }

    /* Make iframe feel embedded */
    iframe { background: #0b0f14; }
  </style>

  <script>
    tailwind = window.tailwind || {};
    tailwind.config = {
      theme: {
        extend: {
          borderRadius: {
            xl: "1rem",
            '2xl': "1.25rem",
            '3xl': "1.75rem"
          }
        }
      }
    };
  </script>
</head>

<body class="h-full bg-[#070a0f] text-white grid-bg">
  <!-- Top Bar -->
  <header class="sticky top-0 z-50 backdrop-blur-md bg-black/35 border-b border-white/10">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 py-4 flex items-center justify-between gap-4">
      <div class="flex items-center gap-3">
        <div class="h-10 w-10 rounded-2xl bg-white/10 border border-white/10 grid place-items-center">
          <span class="font-mono text-sm tracking-tight">LL</span>
        </div>
        <div class="leading-tight">
          <div class="flex items-center gap-2">
            <h1 class="text-base sm:text-lg font-black tracking-tight">Listing Lens</h1>
            <span class="text-[11px] px-2 py-0.5 rounded-full bg-white/10 border border-white/10 text-white/70">Dashboard</span>
          </div>
          <p class="text-xs text-white/55">One screenshot. Everything that matters. (now with a proper cockpit)</p>
        </div>
      </div>

      <div class="flex items-center gap-2 sm:gap-3">
        <button id="btnNew" class="hidden sm:inline-flex items-center gap-2 px-3 py-2 rounded-xl bg-white/10 border border-white/10 hover:bg-white/15 transition">
          <span class="text-sm font-semibold">New analysis</span>
          <span class="text-xs text-white/60">↻</span>
        </button>

        <button id="btnArchive" class="inline-flex items-center gap-2 px-3 py-2 rounded-xl bg-emerald-500/90 hover:bg-emerald-500 transition text-black font-extrabold">
          Archive current
          <span class="text-black/70">⤓</span>
        </button>

        <div class="h-10 w-px bg-white/10 mx-1 hidden sm:block"></div>

        <div class="flex items-center gap-3">
          <div class="text-right hidden sm:block">
            <div class="text-xs text-white/55">Signed in</div>
            <div class="text-sm font-bold">jay@listinglens.app</div>
          </div>
          <div class="h-10 w-10 rounded-2xl bg-white/10 border border-white/10 grid place-items-center">
            <span class="text-sm font-black">J</span>
          </div>
        </div>
      </div>
    </div>
  </header>

  <main class="max-w-7xl mx-auto px-4 sm:px-6 py-6">
    <!-- Bento Grid -->
    <div class="grid grid-cols-1 lg:grid-cols-12 gap-4">
      <!-- Left Column: static + archive -->
      <aside class="lg:col-span-4 space-y-4">
        <!-- Credits / Status -->
        <section class="rounded-3xl bg-white/5 border border-white/10 p-5 shadow-[0_0_0_1px_rgba(255,255,255,0.03)]">
          <div class="flex items-start justify-between gap-3">
            <div>
              <h2 class="text-sm font-black tracking-tight">Account</h2>
              <p class="text-xs text-white/55">Credits + quick actions</p>
            </div>
            <span class="text-[11px] px-2 py-0.5 rounded-full bg-white/10 border border-white/10 text-white/70">Live</span>
          </div>

          <div class="mt-4 grid grid-cols-2 gap-3">
            <div class="rounded-2xl bg-black/30 border border-white/10 p-4">
              <div class="text-xs text-white/55">Credits remaining</div>
              <div class="mt-1 text-3xl font-black tracking-tight" id="creditsCount">7</div>
              <div class="mt-2 text-[11px] text-white/45">1 credit = 1 report</div>
            </div>
            <div class="rounded-2xl bg-black/30 border border-white/10 p-4">
              <div class="text-xs text-white/55">Plan</div>
              <div class="mt-1 text-lg font-extrabold">Starter</div>
              <div class="mt-2 text-[11px] text-white/45">Upgrade later. Ship now.</div>
            </div>
          </div>

          <div class="mt-4 flex flex-col sm:flex-row gap-2">
            <button class="w-full rounded-2xl px-4 py-3 bg-white/10 border border-white/10 hover:bg-white/15 transition font-bold">
              Buy credits
            </button>
            <button class="w-full rounded-2xl px-4 py-3 bg-white/10 border border-white/10 hover:bg-white/15 transition font-bold">
              Billing
            </button>
          </div>
        </section>

        <!-- How it works -->
        <section class="rounded-3xl bg-white/5 border border-white/10 p-5">
          <h2 class="text-sm font-black tracking-tight">How this works</h2>
          <p class="mt-1 text-xs text-white/55">
            Upload up to <span class="font-bold text-white/80">4 screenshots</span> of a listing. We extract the facts, compare against known issues, and return a
            human-readable verdict — plus a visual “x-ray hotspot” overlay.
          </p>

          <div class="mt-4 space-y-3">
            <div class="flex gap-3">
              <div class="h-8 w-8 rounded-2xl bg-emerald-500/15 border border-emerald-400/20 grid place-items-center">1</div>
              <div>
                <div class="text-sm font-bold">Upload</div>
                <div class="text-xs text-white/55">Screenshots only. No logins needed.</div>
              </div>
            </div>
            <div class="flex gap-3">
              <div class="h-8 w-8 rounded-2xl bg-emerald-500/15 border border-emerald-400/20 grid place-items-center">2</div>
              <div>
                <div class="text-sm font-bold">Analyze</div>
                <div class="text-xs text-white/55">Mechanic persona + model-specific checks.</div>
              </div>
            </div>
            <div class="flex gap-3">
              <div class="h-8 w-8 rounded-2xl bg-emerald-500/15 border border-emerald-400/20 grid place-items-center">3</div>
              <div>
                <div class="text-sm font-bold">Delete images</div>
                <div class="text-xs text-white/55">We keep the report, not your raw uploads.</div>
              </div>
            </div>
          </div>

          <div class="mt-4 rounded-2xl bg-black/30 border border-white/10 p-4">
            <div class="text-xs font-bold text-white/80">What to upload (best results)</div>
            <ul class="mt-2 text-xs text-white/55 list-disc list-inside space-y-1">
              <li>First screenshot with price, year, make/model, kms</li>
              <li>Description screenshot (mods / history / “needs nothing”)</li>
              <li>Spec/features screenshot (engine, trim, options)</li>
              <li>Any red flags: damage, warnings, finance owed, “just serviced”</li>
            </ul>
          </div>
        </section>

        <!-- Archive list -->
        <section class="rounded-3xl bg-white/5 border border-white/10 p-5">
          <div class="flex items-center justify-between gap-3">
            <div>
              <h2 class="text-sm font-black tracking-tight">Archive</h2>
              <p class="text-xs text-white/55">Click an entry to load it into the panel</p>
            </div>
            <button id="btnClear" class="text-xs px-3 py-1.5 rounded-xl bg-white/10 border border-white/10 hover:bg-white/15 transition">
              Clear
            </button>
          </div>

          <div id="archiveList" class="mt-4 space-y-2 max-h-[40vh] overflow-auto pr-1">
            <!-- Items injected by JS -->
          </div>

          <div class="mt-4 text-[11px] text-white/45">
            Tip: this becomes your “vehicle memory”. The right panel always shows one selected report.
          </div>
        </section>
      </aside>

      <!-- Right Column: dynamic iframe panel -->
      <section class="lg:col-span-8">
        <div class="rounded-3xl bg-white/5 border border-white/10 shadow-[0_0_0_1px_rgba(255,255,255,0.03)] overflow-hidden">
          <!-- Panel header -->
          <div class="p-5 border-b border-white/10 flex flex-col sm:flex-row sm:items-center justify-between gap-3">
            <div>
              <h2 class="text-sm font-black tracking-tight">Inspection Panel</h2>
              <p class="text-xs text-white/55" id="panelSub">
                Loaded: <span class="text-white/80 font-semibold">Demo Report — Wrangler JL</span>
              </p>
            </div>

            <div class="flex items-center gap-2">
              <button id="btnPrint" class="px-3 py-2 rounded-xl bg-white/10 border border-white/10 hover:bg-white/15 transition text-sm font-bold">
                Print
              </button>
              <button id="btnPop" class="px-3 py-2 rounded-xl bg-white/10 border border-white/10 hover:bg-white/15 transition text-sm font-bold">
                Pop out
              </button>
            </div>
          </div>

          <!-- iframe container -->
          <div class="relative">
            <iframe
              id="reportFrame"
              title="Listing Lens report"
              class="w-full h-[72vh] lg:h-[76vh]"
              sandbox="allow-same-origin allow-scripts allow-popups allow-forms"
            ></iframe>

            <!-- Overlay badge -->
            <div class="absolute top-4 left-4 flex items-center gap-2 px-3 py-2 rounded-2xl bg-black/55 border border-white/10 backdrop-blur">
              <span class="inline-block h-2.5 w-2.5 rounded-full bg-emerald-400"></span>
              <span class="text-xs font-bold">Report loaded</span>
              <span class="text-xs text-white/50 font-mono" id="reportId">RPT-0001</span>
            </div>
          </div>
        </div>

        <!-- Bottom row quick bento -->
        <div class="mt-4 grid grid-cols-1 md:grid-cols-3 gap-4">
          <div class="rounded-3xl bg-white/5 border border-white/10 p-5">
            <div class="text-xs text-white/55">Default persona</div>
            <div class="mt-1 text-lg font-extrabold">Salty Mechanic</div>
            <div class="mt-2 text-xs text-white/55">Swap to Electronics Expert (phones) later — same engine, different voice.</div>
          </div>

          <div class="rounded-3xl bg-white/5 border border-white/10 p-5">
            <div class="text-xs text-white/55">Privacy posture</div>
            <div class="mt-1 text-lg font-extrabold">Delete uploads</div>
            <div class="mt-2 text-xs text-white/55">Store extracted facts + report only. No raw images retained.</div>
          </div>

          <div class="rounded-3xl bg-white/5 border border-white/10 p-5">
            <div class="text-xs text-white/55">Next “wow” feature</div>
            <div class="mt-1 text-lg font-extrabold">X-ray hotspots</div>
            <div class="mt-2 text-xs text-white/55">Highlight likely issues by region (engine, drivetrain, cooling, electronics).</div>
          </div>
        </div>
      </section>
    </div>
  </main>

  <script>
    // ---------------------------------------------
    // Demo data (replace with real archive data)
    // ---------------------------------------------
    const demoReports = [
      {
        id: "RPT-0001",
        title: "2019 Jeep Wrangler JL Rubicon",
        subtitle: "KMs: 87,000 • $54,990 • NSW",
        risk: "Moderate",
        ts: "Today 6:12pm",
        srcdoc: buildDemoReportHtml({
          heading: "2019 Jeep Wrangler JL Rubicon — Inspection",
          verdict: "Moderate Risk",
          bullets: [
            "Ask for diff/transfer case service evidence (hard use = wear).",
            "Check for cooling system leaks + thermostat history.",
            "Verify mods were installed properly (wiring, lift geometry, driveline angles).",
            "If it’s been wheeled: inspect chassis rails, skid plates, mounts, underbody impacts."
          ],
          hotspots: [
            { area: "Front Diff", note: "Listen for whine, check oil level/condition." },
            { area: "Cooling", note: "Leaks / temp creep / fan behavior." },
            { area: "Steering", note: "Death wobble risk if geometry is off." },
            { area: "Electrics", note: "Aftermarket wiring = gremlins." }
          ]
        })
      },
      {
        id: "RPT-0002",
        title: "2014 Toyota Hilux SR5",
        subtitle: "KMs: 210,500 • $26,000 • VIC",
        risk: "Low",
        ts: "Yesterday 9:41pm",
        srcdoc: buildDemoReportHtml({
          heading: "2014 Toyota Hilux SR5 — Inspection",
          verdict: "Low Risk",
          bullets: [
            "If logbooks are solid, these are tanks.",
            "Check for injector rattle/cold-start smoke.",
            "Inspect for chassis rust (be honest about beach driving).",
            "Confirm timing/maintenance intervals have been followed."
          ],
          hotspots: [
            { area: "Injectors", note: "Cold-start behavior + service history." },
            { area: "Chassis", note: "Rust + corrosion hot spots." },
            { area: "Rear leafs", note: "Sag + cracking if overloaded." },
            { area: "Turbo", note: "Whistle/lag, oil seep, boost leaks." }
          ]
        })
      },
      {
        id: "RPT-0003",
        title: "2013 Mercedes A250 AMG",
        subtitle: "KMs: 154,000 • Trade-in scenario",
        risk: "High",
        ts: "Last week",
        srcdoc: buildDemoReportHtml({
          heading: "2013 Mercedes A250 AMG — Inspection",
          verdict: "High Risk",
          bullets: [
            "Sunroof fault can be expensive — confirm repair quotes.",
            "Service due? Assume it’s overdue until proven otherwise.",
            "Scan for drivetrain codes; check transmission behavior under load.",
            "Budget for a proper baseline service before relying on it."
          ],
          hotspots: [
            { area: "Sunroof", note: "Track/mechanism, drains, motor." },
            { area: "Transmission", note: "Shift quality, fluid condition." },
            { area: "Cooling", note: "Leaks, radiator, thermostat." },
            { area: "Electronics", note: "Modules + parasitic drain." }
          ]
        })
      }
    ];

    const archiveListEl = document.getElementById("archiveList");
    const reportFrame = document.getElementById("reportFrame");
    const reportIdEl = document.getElementById("reportId");
    const panelSub = document.getElementById("panelSub");
    const creditsCountEl = document.getElementById("creditsCount");

    // Load first report by default
    let currentReport = demoReports[0];
    let credits = parseInt(creditsCountEl.textContent, 10);

    function renderArchive() {
      archiveListEl.innerHTML = "";
      demoReports.forEach((r) => {
        const card = document.createElement("button");
        card.className =
          "w-full text-left rounded-2xl bg-black/30 border border-white/10 p-4 hover:bg-black/40 transition focus:outline-none focus:ring-2 focus:ring-emerald-400/50";
        card.onclick = () => loadReport(r);

        const riskPill =
          r.risk === "High" ? "bg-red-500/15 border-red-400/20 text-red-200" :
          r.risk === "Moderate" ? "bg-amber-500/15 border-amber-400/20 text-amber-200" :
          "bg-emerald-500/15 border-emerald-400/20 text-emerald-200";

        card.innerHTML = `
          <div class="flex items-start justify-between gap-3">
            <div>
              <div class="text-sm font-extrabold leading-snug">${escapeHtml(r.title)}</div>
              <div class="mt-1 text-xs text-white/55">${escapeHtml(r.subtitle)}</div>
            </div>
            <div class="shrink-0 text-right">
              <div class="text-[11px] px-2 py-1 rounded-full border ${riskPill} inline-flex items-center gap-1">
                <span class="inline-block h-1.5 w-1.5 rounded-full bg-current opacity-70"></span>
                ${escapeHtml(r.risk)}
              </div>
              <div class="mt-2 text-[11px] text-white/40">${escapeHtml(r.ts)}</div>
            </div>
          </div>
          <div class="mt-3 flex items-center justify-between">
            <div class="text-[11px] text-white/45 font-mono">${escapeHtml(r.id)}</div>
            <div class="text-xs font-bold text-white/70">Load →</div>
          </div>
        `;
        archiveListEl.appendChild(card);
      });
    }

    function loadReport(report) {
      currentReport = report;
      reportFrame.srcdoc = report.srcdoc;
      reportIdEl.textContent = report.id;
      panelSub.innerHTML = `Loaded: <span class="text-white/80 font-semibold">${escapeHtml(report.title)}</span>`;
    }

    // Demo: archive current "consumes" 1 credit and clones report with new id/time
    document.getElementById("btnArchive").addEventListener("click", () => {
      if (credits <= 0) {
        alert("No credits left. Buy credits to run more reports.");
        return;
      }
      credits -= 1;
      creditsCountEl.textContent = credits;

      const newId = `RPT-${String(1000 + demoReports.length + 1).slice(1)}`;
      const clone = {
        ...currentReport,
        id: newId,
        ts: "Just now",
        title: currentReport.title + " (Archived copy)"
      };
      demoReports.unshift(clone);
      renderArchive();
      loadReport(clone);
    });

    document.getElementById("btnNew").addEventListener("click", () => {
      alert("Wire this to your upload flow (4 screenshots → analysis → render report).");
    });

    document.getElementById("btnClear").addEventListener("click", () => {
      // Keep at least one demo report so the UI doesn't go empty
      while (demoReports.length > 1) demoReports.pop();
      renderArchive();
    });

    document.getElementById("btnPrint").addEventListener("click", () => {
      try {
        reportFrame.contentWindow.focus();
        reportFrame.contentWindow.print();
      } catch (e) {
        alert("Print blocked by browser sandbox. You can also use Pop out → then print.");
      }
    });

    document.getElementById("btnPop").addEventListener("click", () => {
      const w = window.open("", "_blank");
      if (!w) return alert("Pop-out blocked. Allow pop-ups for this site.");
      w.document.open();
      // Basic pop-out shell
      w.document.write(`<!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>${escapeHtml(currentReport.title)}</title></head><body style="margin:0;background:#0b0f14;color:#fff;font-family:Inter,system-ui,sans-serif;">${currentReport.srcdoc}</body></html>`);
      w.document.close();
    });

    function buildDemoReportHtml({ heading, verdict, bullets, hotspots }) {
      // This HTML lives INSIDE the iframe via srcdoc.
      // Replace with your real report renderer later.
      const hotspotRows = hotspots.map(h => `
        <div style="display:flex;gap:12px;align-items:flex-start;padding:12px;border:1px solid rgba(255,255,255,0.10);border-radius:14px;background:rgba(0,0,0,0.25);">
          <div style="width:10px;height:10px;border-radius:999px;background:#22c55e;margin-top:6px;flex:0 0 auto;"></div>
          <div>
            <div style="font-weight:800;font-size:13px;letter-spacing:-0.01em;">${escapeHtml(h.area)}</div>
            <div style="opacity:0.72;font-size:12px;line-height:1.35;margin-top:2px;">${escapeHtml(h.note)}</div>
          </div>
        </div>
      `).join("");

      const bulletLis = bullets.map(b => `<li style="margin:8px 0;opacity:0.78;">${escapeHtml(b)}</li>`).join("");

      // Fake “x-ray” panel with clickable hotspots (purely illustrative)
      const hotspotDots = hotspots.map((h, i) => {
        const positions = [
          "left:18%;top:28%;",
          "left:62%;top:22%;",
          "left:35%;top:62%;",
          "left:72%;top:62%;"
        ];
        const pos = positions[i % positions.length];
        return `
          <button onclick="showHotspot(${i})"
            style="position:absolute;${pos}width:14px;height:14px;border-radius:999px;background:rgba(239,68,68,0.95);border:2px solid rgba(255,255,255,0.85);box-shadow:0 0 0 6px rgba(239,68,68,0.12);cursor:pointer;">
          </button>
        `;
      }).join("");

      const hotspotData = JSON.stringify(hotspots.map(h => ({ area: h.area, note: h.note })));

      return `
        <div style="padding:22px 22px 26px;">
          <div style="display:flex;align-items:flex-start;justify-content:space-between;gap:16px;">
            <div>
              <div style="font-size:12px;opacity:0.6;">Listing Lens Report</div>
              <h1 style="margin:6px 0 0;font-size:20px;line-height:1.15;letter-spacing:-0.02em;font-weight:900;">${escapeHtml(heading)}</h1>
              <div style="margin-top:10px;display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:999px;background:rgba(34,197,94,0.15);border:1px solid rgba(34,197,94,0.25);font-weight:800;font-size:12px;">
                Verdict: ${escapeHtml(verdict)}
              </div>
            </div>
            <div style="text-align:right;">
              <div style="font-size:12px;opacity:0.6;">Generated</div>
              <div style="font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,'Liberation Mono',monospace;font-size:12px;opacity:0.85;margin-top:4px;">${new Date().toLocaleString()}</div>
            </div>
          </div>

          <div style="margin-top:18px;display:grid;grid-template-columns: 1.2fr 0.8fr;gap:16px;">
            <!-- X-ray visual -->
            <div style="border:1px solid rgba(255,255,255,0.10);border-radius:18px;background:rgba(0,0,0,0.25);overflow:hidden;">
              <div style="padding:14px 14px 10px;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid rgba(255,255,255,0.08);">
                <div>
                  <div style="font-weight:900;font-size:13px;letter-spacing:-0.01em;">X-ray view (demo)</div>
                  <div style="font-size:12px;opacity:0.6;margin-top:2px;">Hotspots are illustrative</div>
                </div>
                <div style="font-size:12px;opacity:0.7;">Click dots →</div>
              </div>

              <div style="position:relative;height:320px;background:
                radial-gradient(circle at 35% 30%, rgba(34,197,94,0.14), transparent 45%),
                radial-gradient(circle at 70% 55%, rgba(34,197,94,0.10), transparent 50%),
                linear-gradient(180deg, rgba(255,255,255,0.04), rgba(0,0,0,0.3));
              ">
                <!-- Fake vehicle silhouette -->
                <div style="position:absolute;inset:24px 28px;border-radius:22px;border:1px dashed rgba(255,255,255,0.18);opacity:0.8;"></div>
                <div style="position:absolute;left:14%;top:20%;width:72%;height:62%;border-radius:28px;border:1px solid rgba(255,255,255,0.10);background:rgba(255,255,255,0.02);"></div>
                <div style="position:absolute;left:18%;top:28%;width:64%;height:46%;border-radius:22px;border:1px solid rgba(255,255,255,0.08);"></div>

                ${hotspotDots}

                <!-- Hotspot popover -->
                <div id="hsBox" style="position:absolute;right:14px;bottom:14px;max-width:52%;padding:12px 12px;border-radius:16px;background:rgba(0,0,0,0.65);border:1px solid rgba(255,255,255,0.12);backdrop-filter: blur(8px);">
                  <div style="font-weight:900;font-size:12px;">Hotspot</div>
                  <div id="hsTitle" style="margin-top:4px;font-weight:800;font-size:13px;">Click a dot</div>
                  <div id="hsNote" style="margin-top:4px;opacity:0.72;font-size:12px;line-height:1.35;">This is where we’d explain the issue + what to check.</div>
                </div>
              </div>
            </div>

            <!-- Quick summary -->
            <div style="border:1px solid rgba(255,255,255,0.10);border-radius:18px;background:rgba(0,0,0,0.25);padding:14px;">
              <div style="font-weight:900;font-size:13px;letter-spacing:-0.01em;">What I’d check first</div>
              <ul style="margin:10px 0 0;padding-left:18px;font-size:12px;line-height:1.45;">
                ${bulletLis}
              </ul>

              <div style="margin-top:14px;padding:12px;border-radius:16px;background:rgba(255,255,255,0.04);border:1px solid rgba(255,255,255,0.10);">
                <div style="font-weight:900;font-size:12px;">Negotiation ammo</div>
                <div style="margin-top:6px;opacity:0.72;font-size:12px;line-height:1.35;">
                  If the seller can’t provide proof for the risk items, assume you’re paying for fixes. Price it in.
                </div>
              </div>
            </div>
          </div>

          <!-- Hotspot list -->
          <div style="margin-top:16px;border:1px solid rgba(255,255,255,0.10);border-radius:18px;background:rgba(0,0,0,0.25);padding:14px;">
            <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;">
              <div>
                <div style="font-weight:900;font-size:13px;letter-spacing:-0.01em;">Hotspot explanations</div>
                <div style="font-size:12px;opacity:0.6;margin-top:2px;">These become model-specific once wired to your engine</div>
              </div>
              <div style="font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,'Liberation Mono',monospace;font-size:11px;opacity:0.6;">srcdoc demo</div>
            </div>

            <div style="margin-top:12px;display:grid;grid-template-columns:1fr 1fr;gap:10px;">
              ${hotspotRows}
            </div>
          </div>

          <script>
            const hotspots = ${hotspotData};
            function showHotspot(i){
              const h = hotspots[i];
              document.getElementById('hsTitle').textContent = h.area;
              document.getElementById('hsNote').textContent = h.note;
            }
          <\/script>
        </div>
      `;
    }

    function escapeHtml(str) {
      return String(str)
        .replaceAll("&", "&amp;")
        .replaceAll("<", "&lt;")
        .replaceAll(">", "&gt;")
        .replaceAll('"', "&quot;")
        .replaceAll("'", "&#039;");
    }

    // Boot
    renderArchive();
    loadReport(currentReport);
  </script>
</body>
</html>
